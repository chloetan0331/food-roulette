<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8" />
  <title>ç¾é£Ÿè½®ç›˜ Food Roulette</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #0f172a;
      --card: #111827;
      --accent: #f97316;
      --text: #e5e7eb;
      --muted: #9ca3af;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1f2937 0, #020617 55%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 16px;
    }

    .app {
      width: 100%;
      max-width: 900px;
      background: linear-gradient(145deg, #020617, #020617, #0b1120);
      border-radius: 24px;
      border: 1px solid rgba(148,163,184,.15);
      box-shadow: 0 30px 80px rgba(0,0,0,.6);
      padding: 20px 18px 22px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      align-items: center;
    }

    .header { width: 100%; display:flex; justify-content:space-between; gap:12px; }
    .title-group { display:flex; flex-direction:column; gap:4px; }

    h1 {
      font-size:1.4rem;
      letter-spacing:.05em;
      text-transform:uppercase;
      display:flex; align-items:center; gap:8px;
    }

    .badge {
      font-size:.72rem; text-transform:uppercase; letter-spacing:.12em;
      padding:3px 8px; border-radius:999px;
      border:1px solid rgba(248,250,252,.18);
      color:var(--muted);
    }

    .subtitle { font-size:.85rem; color:var(--muted); }

    .controls {
      width:100%; display:flex; flex-wrap:wrap; justify-content:center; align-items:center;
      gap:10px; padding:10px 12px; border-radius:999px;
      background: radial-gradient(circle at top left, rgba(30,64,175,.5), transparent),
                  rgba(15,23,42,.9);
      border:1px solid rgba(148,163,184,.3);
    }

    .controls-section { display:flex; align-items:center; gap:6px; font-size:.85rem; color:var(--muted); }

    .meal-toggle {
      display:inline-flex; padding:3px; background:rgba(15,23,42,.9);
      border-radius:999px; border:1px solid rgba(148,163,184,.4);
    }

    .meal-toggle button {
      border:none; background:transparent; color:var(--muted); cursor:pointer;
      padding:5px 12px; border-radius:999px; transition:.2s;
    }

    .meal-toggle button.active {
      background: rgba(249,115,22,.25);
      color:#fed7aa;
      box-shadow:0 0 0 1px rgba(249,115,22,.4), 0 8px 20px rgba(249,115,22,.35);
    }

    select {
      background:rgba(15,23,42,.9); border-radius:999px; border:1px solid rgba(148,163,184,.5);
      padding:5px 14px; color:var(--text);
    }

    .left-panel {
      padding:12px; border-radius:18px;
      background: radial-gradient(circle at top, rgba(15,23,42,.9), #020617);
      border:1px solid rgba(31,41,55,.9);
      width:100%; max-width:520px;
      display:flex; flex-direction:column; align-items:center; gap:16px;
    }

    .wheel-wrapper {
      position:relative; width:min(360px, 80vw); aspect-ratio:1/1;
      display:flex; justify-content:center; align-items:center;
    }

    .wheel {
      width:100%; height:100%; border-radius:50%;
      border:8px solid rgba(15,23,42,.95);
      box-shadow:0 0 0 1px rgba(148,163,184,.5),
                 0 0 0 10px rgba(15,23,42,.9),
                 0 30px 60px rgba(0,0,0,.9);
      background: radial-gradient(circle at center, #020617 0, #020617 40%, #111827 60%);
      transition:transform 4s cubic-bezier(.19,1,.22,1);
      overflow:hidden;
    }

    .pointer {
      position:absolute; top:-2px;
      width:0; height:0;
      border-left:12px solid transparent;
      border-right:12px solid transparent;
      border-top:20px solid #f97316;
      z-index:10;
    }

    /* éšè—æ‰‡åŒºæ–‡å­— */
    #wheelLabels { display:none!important; }

    .spin-btn {
      padding:9px 24px; border-radius:999px; border:none; cursor:pointer;
      color:#0f172a; background:linear-gradient(135deg,#f97316,#fb923c);
      font-weight:600; letter-spacing:.12em;
      box-shadow:0 14px 28px rgba(249,115,22,.4);
    }

    .result { text-align:center; }
    .result-label { color:var(--muted); font-size:.8rem; margin-bottom:4px; }
    .result-empty { color:#f97373; font-size:.85rem; }
    .result-name {
      font-size:1.4rem; padding:8px 14px; border-radius:999px;
      background:rgba(15,23,42,.8); border:1px solid rgba(148,163,184,.6);
      display:none;
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="title-group">
        <h1>ç¾é£Ÿè½®ç›˜ <span class="badge">Food Roulette</span></h1>
        <p class="subtitle">é€‰ä¸äº†åƒä»€ä¹ˆï¼Ÿäº¤ç»™å‘½è¿å•¦ âœ¨</p>
      </div>
    </header>

    <!-- æ§åˆ¶åŒº -->
    <section class="controls">
      <div class="controls-section">
        <span>ç”¨é¤ï¼š</span>
        <div class="meal-toggle" id="mealToggle">
          <button type="button" data-meal="lunch" class="active">ğŸŒ åˆé¤</button>
          <button type="button" data-meal="dinner">ğŸŒ™ æ™šé¤</button>
        </div>
      </div>

      <div class="controls-section">
        <span>ä»Šå¤©ï¼š</span>
        <select id="daySelect">
          <option value="1">æ˜ŸæœŸä¸€</option>
          <option value="2">æ˜ŸæœŸäºŒ</option>
          <option value="3">æ˜ŸæœŸä¸‰</option>
          <option value="4">æ˜ŸæœŸå››</option>
          <option value="5">æ˜ŸæœŸäº”</option>
          <option value="6">æ˜ŸæœŸå…­</option>
          <option value="0">æ˜ŸæœŸæ—¥</option>
        </select>
      </div>

      <div class="controls-section">
        <span>è§„åˆ™ï¼š</span>
        <span>åªä¿ç•™æœ‰å¼€çš„åº— âœ”</span>
      </div>
    </section>

    <!-- è½®ç›˜ -->
    <section class="left-panel">
      <div class="wheel-wrapper">
        <div class="pointer"></div>
        <div id="wheel" class="wheel"></div>
        <div id="wheelLabels"></div>
      </div>

      <button id="spinBtn" class="spin-btn">ğŸ° SPIN!</button>

      <div class="result">
        <div class="result-label">ç»“æœ / RESULT</div>
        <div id="resultEmpty" class="result-empty">å…ˆé€‰æ‹©ã€Œæœ‰å¼€ã€çš„åº—æ‰èƒ½æŠ½å“¦ï½</div>
        <div id="resultName" class="result-name"></div>
      </div>
    </section>
  </div>

  <script>
    // åº—é“ºè¥ä¸šæ—¶é—´
    const PLACES = [
      { name:"é˜¿é›„é¸¡é¥­", schedule:{ lunch:[1,2,3,4,5,6], dinner:[] }},
      { name:"èŠ‹å¤´é¥­", schedule:{ lunch:[0,2,3,4,5,6], dinner:[] }},
      { name:"å’¸ç²¥", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[] }},
      { name:"å°çŒ«é¸­é¥­", schedule:{ lunch:[0,2,3,4,5,6], dinner:[] }},
      { name:"48å¤§æ¿", schedule:{ lunch:[0,1,2,3,5,6], dinner:[] }},
      { name:"è¥¿åˆ€æ—", schedule:{ lunch:[0,2,3,4,5,6], dinner:[] }},
      { name:"é¢ç²‰ç³•", schedule:{ lunch:[0,2,3,4,5,6], dinner:[] }},
      { name:"å¥½å‹é¸¡é¥­", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[] }},
      { name:"ç››å¤§å¨", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[0,1,2,3,4,5,6] }},
      { name:"çŠ¶å…ƒç±³çº¿", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[0,1,2,3,4,5,6] }},
      { name:"çˆ·çˆ·æ¹–å—èœ", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[0,1,2,3,4,5,6] }},
      { name:"ä¸œäº¬", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[0,1,2,3,4,5,6] }},
      { name:"ç¾é£Ÿé¦™", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[0,1,2,3,4,5,6] }},
      { name:"ç¾èŠ³", schedule:{ lunch:[0,2,3,4,5,6], dinner:[] }},
      { name:"ç ‚ç…²é¸¡é¥­", schedule:{ lunch:[0,1,2,3,5,6], dinner:[] }},
      { name:"çº¢ä¸­ç¦å»ºé¢", schedule:{ lunch:[0,2,3,4,5,6], dinner:[] }},
      { name:"I MUM MUM", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[0,1,2,3,4,5,6] }},
      { name:"ç”°ä¼ ", schedule:{ lunch:[0,1,3,4,5,6], dinner:[] }},
      { name:"ä½³ä½³", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[1,2,3,4,5,6] }},
      { name:"Ah Hong", schedule:{ lunch:[0,1,2,4,5,6], dinner:[] }},
      { name:"å´å®¶åº„", schedule:{ lunch:[0,1,3,4,5,6], dinner:[0,1,3,4,5,6] }},
      { name:"MALA MASTER", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[0,1,2,3,4,5,6] }},
      { name:"Inderawasih", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[] }},
      { name:"Chai Leng Park", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[0,1,2,3,4,5,6] }},
      { name:"å’–å–±é±¼å¤´", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[] }},
      { name:"å°æé…¸èœé±¼", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[0,1,2,3,4,5,6] }},
      { name:"å”å°é¾™", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[0,1,2,3,4,5,6] }},
      { name:"Empat Sekawan", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[0,1,2,3,4,5,6] }},
      { name:"Rutin", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[0,1,2,3,4,5,6] }},
      { name:"çº¢å±‹", schedule:{ lunch:[0,1,2,4,5,6], dinner:[] }},
      { name:"GuanSeng ç²¥", schedule:{ lunch:[0,1,2,3,4,5,6], dinner:[] }},

      /* æ™šé¤ */
      { name:"æ°´æ™¶å®«tomyam", schedule:{ lunch:[], dinner:[0,1,2,3,4,5,6] }},
      { name:"æ°´æ™¶å®«ç ‚ç…²é¸¡é¥­", schedule:{ lunch:[], dinner:[0,1,2,3,4,5,6] }},
      { name:"æ°´æ™¶å®«å’–å–±é¢", schedule:{ lunch:[], dinner:[0,1,2,3,4,5,6] }},
      { name:"æ°´æ™¶å®«å¤§æ¿", schedule:{ lunch:[], dinner:[0,1,2,3,4,5,6] }},
      { name:"å…‰åtomyam", schedule:{ lunch:[], dinner:[0,2,3,4,5,6] }},
      { name:"æœé˜³", schedule:{ lunch:[], dinner:[0,2,3,4,5,6] }},
      { name:"æ—ºæ¥", schedule:{ lunch:[], dinner:[0,1,2,3,5,6] }},
      { name:"å¤œæ¥é¦™ç‚’ç²¿æ¡", schedule:{ lunch:[], dinner:[0,1,2,3,5,6] }},
      { name:"çº¢è¾£æ¤’", schedule:{ lunch:[], dinner:[0,1,2,3,4,5,6] }},
      { name:"Burger malas", schedule:{ lunch:[], dinner:[1,2,3,4,5,6] }},
      { name:"juheng", schedule:{ lunch:[], dinner:[0,1,3,4,5,6] }},
      { name:"bak kut teh", schedule:{ lunch:[], dinner:[0,1,2,3,5,6] }},
      { name:"éº»è¾£å¤§ä¼¯å…¬", schedule:{ lunch:[], dinner:[0,1,2,3,4,5,6] }},
      { name:"æ™‹é“¨", schedule:{ lunch:[], dinner:[0,1,2,3,4,5,6] }},
      { name:"é˜¿æ¥", schedule:{ lunch:[], dinner:[0,1,2,3,4,5,6] }},
      { name:"å’¸é±¼ç±³ç²‰", schedule:{ lunch:[], dinner:[0,2,3,4,5,6] }}
    ];

    /* æ¸²æŸ“è½®ç›˜ */
    const wheel = document.getElementById("wheel");
    const spinBtn = document.getElementById("spinBtn");
    const resultName = document.getElementById("resultName");
    const resultEmpty = document.getElementById("resultEmpty");

    const mealToggle = document.getElementById("mealToggle");
    const daySelect = document.getElementById("daySelect");

    let currentMeal = "lunch";
    let currentDay = new Date().getDay();
    daySelect.value = currentDay.toString();

    let filteredPlaces = [];
    let currentRotation = 0;
    let spinning = false;

    const COLORS = ["#f97316","#10b981","#3b82f6","#ec4899","#eab308","#6366f1","#22c55e","#f97373"];

    function renderWheel() {
      filteredPlaces = PLACES.filter(p => p.schedule[currentMeal].includes(currentDay));

      if (!filteredPlaces.length) {
        wheel.style.background = "#111827";
        resultEmpty.style.display = "block";
        resultName.style.display = "none";
        return;
      }

      const colors = [];
      const step = 360 / filteredPlaces.length;

      for (let i = 0; i < filteredPlaces.length; i++) {
        const color = COLORS[i % COLORS.length];
        const start = i * step;
        const end = (i + 1) * step;
        colors.push(`${color} ${start}deg ${end}deg`);
      }

      wheel.style.background = `conic-gradient(${colors.join(",")})`;
      resultEmpty.style.display = "none";
    }

    function spin() {
      if (!filteredPlaces.length || spinning) return;
      spinning = true;
      spinBtn.disabled = true;

      const count = filteredPlaces.length;
      const per = 360 / count;

      const chosenIdx = Math.floor(Math.random() * count);
      const randomOffset = Math.random() * per;
      const targetAngle = chosenIdx * per + randomOffset;

      const extraTurns = 5;
      const finalRotation = currentRotation + extraTurns * 360 + (360 - targetAngle);

      wheel.style.transition = "transform 4s cubic-bezier(.19,1,.22,1)";
      wheel.style.transform = `rotate(${finalRotation}deg)`;

      setTimeout(() => {
        spinning = false;
        spinBtn.disabled = false;

        currentRotation = finalRotation % 360;
        resultName.textContent = filteredPlaces[chosenIdx].name;
        resultName.style.display = "inline-block";
      }, 4100);
    }

    spinBtn.addEventListener("click", spin);

    mealToggle.addEventListener("click", e => {
      const btn = e.target.closest("button");
      if (!btn) return;

      mealToggle.querySelectorAll("button").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");

      currentMeal = btn.dataset.meal;
      renderWheel();
    });

    daySelect.addEventListener("change", () => {
      currentDay = Number(daySelect.value);
      renderWheel();
    });

    renderWheel();
  </script>
</body>
</html>
